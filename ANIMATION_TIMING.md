# 动画时序调整说明

## 🎯 调整内容

由于页面前面已经有流体动画部分，翻转卡片的动画需要延迟触发，避免太早出现。

## 📊 调整细节

### 1. 延长服务区固定时间
```javascript
// 之前: 4个视口高度
end: `+=${window.innerHeight * 4}px`

// 现在: 5个视口高度
end: `+=${window.innerHeight * 5}px`
```

### 2. 标题动画加速
```javascript
// 之前: 标题占用90%的时间 (0-90%)
const headerProgress = gsap.utils.clamp(0, 1, progress * 0.9);

// 现在: 标题只占用20%的时间 (0-20%)
const headerProgress = gsap.utils.clamp(0, 1, progress * 0.2);
```

### 3. 卡片动画延迟
```javascript
// 新增: 从20%进度后才开始卡片动画
const adjustedProgress = Math.max(0, (progress - 0.2) / 0.8);
```

## 📐 时间线分布

### 整体滚动区域: 5个视口高度

```
0%        20%                                    100%
│─────────│──────────────────────────────────────│
│         │                                        │
│ 标题上升 │          卡片动画                      │
│ (1vh)   │          (4vh)                        │
│         │                                        │
│         ├────┬────┬────┬────┬────┬────┬────┬───│
│         │    │    │    │    │    │    │    │   │
│         │ 卡1│ 卡2│ 卡3│翻转│翻转│翻转│完成│   │
│         │ 出 │ 出 │ 出 │ 1  │ 2  │ 3  │    │   │
│         │ 现 │ 现 │ 现 │    │    │    │    │   │
```

### 详细阶段

#### 阶段 1: 标题动画 (0-20% 进度)
- **时长**: 1个视口高度
- **动画**: 标题从底部 (400%) 滑到中心 (0%)
- **卡片状态**: 静止在屏幕外

#### 阶段 2: 卡片飞入 (20-40% 进度)
- **时长**: 1个视口高度
- **动画**: 
  - 卡片从上方 (-100%) 降到半空 (50%)
  - 缩放从 0.25 → 0.75
  - 透明度从 0 → 1
  - 顺序出现 (卡1 → 卡2 → 卡3)

#### 阶段 3: 卡片稳定 (40-60% 进度)
- **时长**: 1个视口高度
- **动画**:
  - 卡片从半空 (50%) 降到中心 (0%)
  - 缩放从 0.75 → 1
  - 位置归中

#### 阶段 4: 卡片归位和翻转 (60-100% 进度)
- **时长**: 2个视口高度
- **动画**:
  - 横向位置从两侧归中
  - 旋转角度归零
  - 3D 翻转 180°
  - 顺序翻转 (卡1 → 卡2 → 卡3)

## 🎬 动画效果

### 视觉体验
1. 用户滚动到服务区
2. 标题快速从底部滑上来 (1个视口)
3. 停留一会儿看标题
4. 继续滚动，卡片从上方飞入 (1个视口)
5. 卡片稳定到中心位置 (1个视口)
6. 卡片横向归位并翻转 (2个视口)
7. 显示卡片背面详细信息

### 时间分配
- **标题**: 20% (1vh)
- **卡片飞入**: 20% (1vh)
- **卡片稳定**: 20% (1vh)
- **卡片翻转**: 40% (2vh)

## 🔧 如何调整

### 如果需要更快的动画
```javascript
// 减少总高度
end: `+=${window.innerHeight * 4}px`

// 减少标题时间
const headerProgress = gsap.utils.clamp(0, 1, progress * 0.15);

// 提前开始卡片
const adjustedProgress = Math.max(0, (progress - 0.15) / 0.85);
```

### 如果需要更慢的动画
```javascript
// 增加总高度
end: `+=${window.innerHeight * 6}px`

// 增加标题时间
const headerProgress = gsap.utils.clamp(0, 1, progress * 0.25);

// 延后开始卡片
const adjustedProgress = Math.max(0, (progress - 0.25) / 0.75);
```

## 📝 注意事项

1. **标题时间 + 卡片时间 = 100%**
   - 标题占 20% → 卡片占 80%
   - 公式: `adjustedProgress = (progress - 标题占比) / (1 - 标题占比)`

2. **卡片顺序延迟**
   - 使用 `index * 0.5` 实现错开
   - 卡1最先，卡3最后

3. **smoothStep 缓动**
   - 所有动画使用 `smoothStep` 函数
   - 确保自然流畅的动画曲线

---

**最后更新**: 2025-10-30
**调整原因**: 前面已有流体动画，需要延迟卡片出现时机
